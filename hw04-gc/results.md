## Анализ результатов запуска приложения с разными настройками heap'a. 

### Параметры системы
Система: WSL2, Ubuntu 20.04 LTS \
ЦП: AMD Ryzen 7 5800H with Radeon Graphics, 3,20 ГГц, 8, 16 \
Память: 32,0 ГБ, 3200 МГц

#### До оптимизации

| -Xms (m) | -Xmx (m) | Tyr 1 (msec) | Tyr 2 (msec) | Tyr 3 (msec) | Comment          |
|----------|----------|--------------|--------------|--------------|------------------|
| 256      | 256      | NaN          | NaN          | NaN          | OutOfMemoryError |
| 256      | 512      | 6537         | 6127         | 6460         | Best memory      |
| 256      | 1024     | 5839         | 5899         | 5900         |                  |
| 256      | 2048     | 5664         | 5799         | 5196         |                  |
| 512      | 512      | 6557         | 5882         | 5854         |                  |
| 512      | 1024     | 5484         | 5234         | 5266         |                  |
| 512      | 2048     | 4035         | 3930         | 3908         | Best performance |
| 1024     | 1024     | 5229         | 5237         | 4942         |                  |
| 1024     | 2048     | 4511         | 4439         | 4378         |                  |
| 2048     | 2048     | 4873         | 4426         | 4431         |                  |

Увеличим максимальный heap для лучшего случая

| -Xms (m) | -Xmx (g) | Tyr 1 (msec) | Tyr 2 (msec) | Tyr 3 (msec) | Comment |
|----------|----------|--------------|--------------|--------------|---------|
| 512      | 4        | 4859         | 5611         | 4957         |         |
| 512      | 8        | 6624         | 6898         | 6708         |         |

Вывод: Минимально допустимым размером heap'а для данного приложения является 512 mb. \
Увеличение стартового размера heap приводит к увеличению времени работы приложения из-за времени затраченного на выделение большей оперативной памяти. \
Оптимальным значением параметра -Xmx является 2 гб.
- При меньшем размере heap'а места выделенное под молодое поколение (Young Generation) не хватает для хранения всех объектов приложения \
и объекты начинают "перетекать" в старое поколение (Old Generation), где уборка мусора занимает значительно больше времени. \
- При увеличении размера heap'а мы начинаем терять производительность на выделении лишней (не используемой приложением за время работы) памяти, \
на времени работы с молодым поколением (больше памяти - больше выделено под молодую область), возможно, так же время тратится на дефрагментацию выделенной области памяти.

#### Оптимизация 1
Изменили тип в классе Data с класса Integer на примитив int.

| -Xms (m) | -Xmx (m) | Tyr 1 (msec) | Tyr 2 (msec) | Tyr 3 (msec) | Comment          |
|----------|----------|--------------|--------------|--------------|------------------|
| 256      | 256      | 5255         | 5345         | 5478         | Best memory      |
| 256      | 512      | 4738         | 5000         | 4822         |                  |
| 256      | 1024     | 4607         | 4580         | 4694         |                  |
| 256      | 2048     | 4144         | 4114         | 4218         |                  |
| 512      | 512      | 5005         | 4767         | 4797         |                  |
| 512      | 1024     | 4820         | 4759         | 4669         |                  |
| 512      | 2048     | 3955         | 3965         | 3984         | Best performance |
| 1024     | 1024     | 4711         | 4717         | 4718         |                  |
| 1024     | 2048     | 3938         | 3808         | 3785         |                  |
| 2048     | 2048     | 4212         | 4317         | 4269         |                  |

Вывод: Перейдя от класса Integer к примитиву int мы уменьшили место занимаемое объектом в памяти, в связи с чем приложению теперь нужно меньше памяти \
для работы, а отчистка такого-же количества объектов происходит быстрее. Но на "оборачивание" int в Integer \
внутри Summator'а все еще уходит много ресурсов.

#### Оптимизация 2
Изменили тип в классе Data с класса Integer на примитив int.
Изменили тип в классе Summator с класса Integer на примитив int.

| -Xms (m) | -Xmx (m) | Tyr 1 (msec) | Tyr 2 (msec) | Tyr 3 (msec) | Comment          |
|----------|----------|--------------|--------------|--------------|------------------|
| 256      | 256      | 1329         | 1346         | 1370         | Best memory      |
| 256      | 512      | 1198         | 1174         | 1283         |                  |
| 256      | 1024     | 1039         | 1032         | 1286         |                  |
| 256      | 2048     | 1234         | 1294         | 1113         |                  |
| 512      | 512      | 1058         | 1088         | 1154         | Best performance |
| 512      | 1024     | 1174         | 1059         | 1111         |                  |
| 512      | 2048     | 1189         | 1172         | 1065         |                  |
| 1024     | 1024     | 1297         | 1320         | 1242         |                  |
| 1024     | 2048     | 1292         | 1303         | 1357         |                  |
| 2048     | 2048     | 1761         | 1189         | 1188         |                  |

Вывод: При полном переводе приложения с Integer на ожидаемо наблюдается скачек производительности. \
Оптимальным выбором параметров heap'а является ```-Xms512m -Xmx512m```. \
При этих параметрах мы получаем оптимальное соотношение между временем на выделение памяти и временем работы GC.